<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>BCR Lucky Draw</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <h1>ğŸ° BCR Lucky Draw</h1>
    <p>Event Lucky Draw System</p>
</header>

<div class="container">

    <!-- SETUP -->
    <section class="card">
        <h2>Setup Data</h2>
        <div class="grid-2">
            <div>
                <label>Upload Peserta (Excel)</label>
                <input type="file" id="filePeserta" accept=".xlsx">
                <button onclick="uploadPeserta()">Upload Peserta</button>
                <button class="danger" onclick="resetPeserta()">Reset Peserta</button>
                <p>Total Peserta: <b id="totalPeserta">0</b></p>
            </div>
            <div>
                <label>Upload Hadiah (Excel)</label>
                <input type="file" id="fileHadiah" accept=".xlsx">
                <button onclick="uploadHadiah()">Upload Hadiah</button>
                <button class="danger" onclick="resetHadiah()">Reset Hadiah</button>
            </div>
        </div>
    </section>

    <!-- ================= STATUS HADIAH ================= -->
    <section class="card">
        <h2>ğŸ Status Hadiah</h2>

        <table>
            <thead>
                <tr>
                    <th>Hadiah</th>
                    <th>Jumlah Tersedia</th>
                </tr>
            </thead>
            <tbody id="tabelStatusHadiah"></tbody>
        </table>
    </section>


    <!-- GACHA -->
    <section class="card gacha">
        <h2 id="currentPrize">ğŸ Hadiah</h2>

        <select id="selectHadiah" onchange="onHadiahChange()"></select>
        <input type="number" id="jumlahPemenang" value="1" min="1">

        <div class="gacha-display">
            <span id="gachaNumber">-----</span>
        </div>
        <div class="gacha-result-list" id="gachaResultList"></div>

        <button class="primary" id="btnUndi" onclick="startUndian()">UNDI SEKARANG</button>
    </section>

    <!-- VERIFIKASI -->
    <section class="card">
        <h2>Verifikasi Pemenang</h2>
        <table>
            <thead>
                <tr>
                    <th>BIB</th><th>Nama</th><th>Hadiah</th><th>Status</th><th>Aksi</th>
                </tr>
            </thead>
            <tbody id="tabelKandidat"></tbody>
        </table>
        <div class="action-bar">
            <button class="btn-action-lg approve-all" onclick="approveAll()">
                Sahkan Semua
            </button>
            <button class="btn-action-lg reset-all" onclick="resetUndian()">
                Reset Undian
            </button>
        </div>
    </section>

    <!-- LAPORAN -->
    <section class="card">
        <h2>Laporan Pemenang</h2>
        <div class="filter-bar">
            <select id="filterHadiah" onchange="renderAll()">
                <option value="">Semua Hadiah</option>
            </select>

            <input
                type="text"
                id="searchBib"
                placeholder="Cari No BIB..."
                oninput="renderAll()"
            />
        </div>
        <table>
            <thead>
                <tr><th>BIB</th><th>Nama</th><th>Hadiah</th></tr>
            </thead>
            <tbody id="tabelLaporan"></tbody>
        </table>
        <div class="export-actions">
            <button class="btn-export csv" onclick="exportCSV()">Export CSV</button>
            <button class="btn-export pdf" onclick="exportPDF()">Export PDF</button>
        </div>
    </section>

</div>

<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.5.29/dist/jspdf.plugin.autotable.min.js"></script>
<script src="app.js"></script>
</body>
</html>
